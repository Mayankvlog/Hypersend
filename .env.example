# ============================================================
# HYPERSEND/ZAPLY VPS DEPLOYMENT CONFIGURATION
# ============================================================
# This file contains all environment variables needed for
# the docker-compose.yml deployment on your VPS
#
# SETUP INSTRUCTIONS:
# 1. Copy this file: cp .env.example .env
# 2. Update values below with your VPS settings
# 3. Deploy: docker-compose up -d
#
# ============================================================
# VPS CONFIGURATION (CRITICAL)
# ============================================================
# Your VPS public IP address (139.59.82.105 in your case)
VPS_IP=139.59.82.105

# ============================================================
# SERVICE PORTS
# ============================================================
# Nginx Reverse Proxy (public-facing)
NGINX_PORT=8080
NGINX_PORT_SSL=8445

# Backend API (internal only - via nginx)
BACKEND_PORT=8000

# Frontend (internal only - via nginx)
FRONTEND_PORT=8550

# MongoDB (internal only - no external access)
MONGODB_PORT=27017

# ============================================================
# MONGODB DATABASE CONFIGURATION
# ============================================================
# MongoDB root user credentials
# SECURITY: Generate strong password with: python -c "import secrets; print(secrets.token_urlsafe(32))"
MONGO_USER=hypersend
MONGO_PASSWORD=

# ============================================================
# BACKEND API CONFIGURATION
# ============================================================
# JWT Secret Key for token signing
# IMPORTANT: Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"
# NEVER commit the real key to Git!
SECRET_KEY=

# JWT Configuration
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=30

# API Base URL (for frontend to reach backend)
# In Docker: use http://backend:8000 (internal service discovery)
API_BASE_URL=http://${VPS_IP}:8000

# ============================================================
# FILE TRANSFER CONFIGURATION
# ============================================================
# Maximum file size: 40 GB
MAX_FILE_SIZE_BYTES=42949672960

# Chunk size for uploads: 4 MB
CHUNK_SIZE=4194304

# Number of parallel chunks allowed
MAX_PARALLEL_CHUNKS=4

# Upload session expiry: 24 hours
UPLOAD_EXPIRE_HOURS=24

# Server-side file retention: 0 = P2P only (no server storage)
FILE_RETENTION_HOURS=0

# ============================================================
# RATE LIMITING CONFIGURATION
# ============================================================
# Requests per user per window
RATE_LIMIT_PER_USER=100

# Time window in seconds
RATE_LIMIT_WINDOW_SECONDS=60

# ============================================================
# DEBUG MODE
# ============================================================
# Set to False for production
# True only for local development
DEBUG=True

# ============================================================
# SMTP EMAIL CONFIGURATION (OPTIONAL)
# ============================================================
# Leave empty to disable email functionality

# SMTP Server
SMTP_HOST=

# SMTP Port (587 for TLS, 465 for SSL)
SMTP_PORT=587

# Email account username
SMTP_USERNAME=

# Email account password or app-specific password
SMTP_PASSWORD=

# Use TLS encryption
SMTP_USE_TLS=True

# Email sender address
EMAIL_FROM=

# ============================================================
# SECURITY CONFIGURATION
# ============================================================

# MongoDB Configuration
MONGO_ROOT_USERNAME=hypersend
MONGO_ROOT_PASSWORD=
# Data directory for file storage
DATA_ROOT=/data

# Uploads path in container
UPLOADS_PATH=/app/uploads

# ============================================================
# DEPLOYMENT INSTRUCTIONS
# ============================================================
#
# 1. COPY THIS FILE:
#    cp .env.example .env
#
# 2. EDIT AND REVIEW:
#    nano .env
#    (Only change MONGO_PASSWORD if needed, everything else is pre-configured)
#
# 3. DEPLOY:
#    docker-compose down
#    docker-compose pull
#    docker-compose up -d
#
# 4. VERIFY DEPLOYMENT:
#    docker-compose ps
#    docker logs hypersend_backend
#    curl http://139.59.82.105:8000/health
#
# ============================================================
